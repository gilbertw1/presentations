
<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Play vs. Grails Smackdown</title>

    <meta name="description"
          content="Play 2 and Grails 2 are often hyped as the most productive JVM Web Frameworks.
          This presentation (and companion talk) compare and contrast these two modern web frameworks.">
    <meta name="author" content="James Ward and Matt Raible">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet'
          type='text/css'>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/smackdown.css">
    <link rel="stylesheet" href="css/print.css" type="text/css" media="print">

    <link rel="stylesheet" href="css/sunburst.css">

    <script src="http://www.google.com/jsapi"></script>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
</head>

<body>

<div id="reveal">

<!-- Used to fade in a background when a specific slide state is reached -->
<div class="state-background"></div>

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">
<section id="intro">
    <h1>Play vs. Grails Smackdown</h1>

    <h3 class="inverted">James Ward and Matt Raible</h3>

    <p><a href="http://twitter.com/_jamesward">@_JamesWard</a> and <a href="http://twitter.com/mraible">@mraible</a></p>
    <script>
        // Delicously hacky. Look away.
        if (navigator.userAgent.match(/(iPhone|iPad|iPod|Android)/i)) document.write('<p style="color: rgba(0,0,0,0.3); text-shadow: none;">(' + 'Swipe to navigate' + ')</p>');
    </script>
    <div class="footnote footer">
        <div style="border-bottom: 1px solid silver">
            Changelog
        </div>
        <div style="margin-left: 10px; width: 310px; margin: 0 auto; text-align: left">
        June 24, 2012: <a href="https://gist.github.com/2973705">Play Performance Fix</a>.<br/>
        June 19, 2012: Published for <a href="http://uberconf.com/">ÃœberConf</a>.
        </div>
    </div>
</section>

<section id="why">
    <h2>Why a Smackdown?</h2>

    <p>
        Play 2 and Grails 2 are often hyped as the <b>most productive</b> JVM Web Frameworks.
    </p>

    <p style="margin-top: 100px">
        <i>
            <small>* We wanted to know how they enhanced the Developer Experience (DX).</small>
        </i>
    </p>
</section>

<section id="requirements">
    <h2>Happy Trails Requirements</h2>
    <br/>

    <div class="column2">
        <ul>
            <li>Server-side Templates</li>
            <li>Play 2 with Java</li>
            <li>Form Validation</li>
            <li>Data Pagination</li>
            <li>Authentication</li>
            <li>Scheduled Jobs</li>
        </ul>
        <ul>
            <li>Atom / RSS</li>
            <li>Email Notifications</li>
            <li>Unit / Integration Tests</li>
            <li>Load Tests</li>
            <li>Performance Tests</li>
        </ul>
    </div>
    <br/>

    <p>Stretch Goals: Search, Photo Upload to S3</p>
</section>

<section id="schedule">
    <h2>Our Schedule</h2>
    <ul>
        <li>Week 1 - Data Model Definition</li>
        <li>Week 2 - Data Layer & URL Design</li>
        <li>Week 3 - Controllers & Auth</li>
        <li>Week 4 - Views</li>
        <li>Week 5 - Misc Polish</li>
    </ul>
</section>

<section>
    <section>
        <h1>Intro to Play 2</h1>
        <br/>
        <img src="assets/images/play_framework.png">
    </section>
    <section>
        <div class="comparison" style="left: 100px; width: 700px; height: 100%;">
            <blockquote style="position: absolute; width: 100%; background: rgba(32, 32, 32, 0.6);">Play is based on a lightweight, stateless, web-friendly architecture and features predictable and minimal resource consumption (CPU, memory, threads) for highly-scalable applications - thanks to its reactive model, based on Iteratee IO.</blockquote>
            <blockquote class="fragment" style="position: absolute; width: 100%; background: rgba(32, 32, 32, 0.8);"><span style="opacity: 0">Play is based on a</span> lightweight, stateless, web-friendly<span style="opacity: 0"> architecture and features predictable and minimal resource consumption (CPU, memory, threads)</span> for highly-scalable applications<span style="opacity: 0"> - thanks to its reactive model, based on Iteratee IO.</span></blockquote>
        </div>
    </section>
    <section>
        <h2>My Top 10 Favorite Features</h2>
        <ul style="list-style-type: none;">
            <li>0) Simple</li>
            <li>1) URL Routing</li>
            <li>2) Class Reloading</li>
            <li>3) Share-Nothing</li>
            <li>4) Java &amp; Scala Support</li>
            <li>5) Great Testing Support</li>
            <li>6) JPA/EBean Support</li>
            <li>7) NIO Server (Netty)</li>
            <li>8) Asset Compiler</li>
            <li>9) Instant Deployment on Heroku</li>
        </ul>
    </section>
</section>
<section>
    <section>
        <h1>Intro to Grails 2</h1>
        <br/>
        <img src="assets/images/grails_framework.png"/>
    </section>
    <section>
        <div class="comparison" style="left: 100px; width: 700px; height: 100%">
            <blockquote style="position: absolute; width: 100%; background: rgba(32, 32, 32, 0.6);">
              Powered by Spring, Grails outperforms the competition. Dynamic, agile web development without compromises.
            </blockquote>
            <blockquote class="fragment" style="position: absolute; width: 100%; background: rgba(32, 32, 32, 0.8);">
              <span style="opacity: 0">Powered by </span>Spring<span style="opacity: 0">, Grails outperforms the competition. Dynamic, agile web development without compromises.</span>
            </blockquote>
        </div>
    </section>
    <section>
        <h2>My Top 10 Favorite Features</h2>
        <ol>
            <li>Documentation</li>
            <li>Clean URLs</li>
            <li>GORM</li>
            <li>IntelliJ IDEA Support</li>
            <li>Zero Turnaround</li>
            <li>Excellent Testing Support</li>
            <li>Groovy</li>
            <li>GSPs</li>
            <li>Resource Optimizer</li>
            <li>Instant Deployment on Heroku</li>
        </ol>
    </section>
</section>

<section>
    <h2>Our Setup</h2>
    <ul>
      <li><strong>IntelliJ IDEA</strong> for Development</li>
      <li><strong>GitHub</strong> for Source Control</li>
      <li><strong>CloudBees</strong> for Continuous Integration</li>
      <li><strong>Heroku</strong> for Production</li>
    </ul>

    <p style="margin-top: 30px">Later added: QA Person and BrowserMob</p>
</section>

<section>
<section>
    <h2>Code Walk Through</h2>

    <p>
        We developed the same app, in similar ways, so let's look at the different layers.
    </p>
    <br/>

    <div class="column2">
        <ul>
            <li><a href="#/7/1">Database</a></li>
            <li><a href="#/7/4">URL Mapping</a></li>
            <li><a href="#/7/6">Models</a></li>
            <li><a href="#/7/8">Controllers</a></li>
            <li><a href="#/7/10">Views</a></li>
            <li><a href="#/7/12">Validation</a></li>
            <li><a href="#/7/14">IDE Support</a></li>
        </ul>
        <ul>
            <li><a href="#/7/16">Job</a></li>
            <li><a href="#/7/18">Feed</a></li>
            <li><a href="#/7/20">Email</a></li>
            <li><a href="#/7/22">Photo Upload</a></li>
            <li><a href="#/7/24">Testing</a></li>
            <li><a href="#/7/26">Demo Data</a></li>
            <li><a href="#/7/28">Configuration</a></li>
            <li><a href="#/7/30">Authentication</a></li>
        </ul>
    </div>
    <div class="down-arrow">&darr;</div>
</section>

<section>
    <h3>Database - Grails</h3>
    <ul>
        <li>Hibernate is the default persistence provider</li>
        <li>Create models, Hibernate creates the schema for you</li>
    </ul>
    <p id="grails-ds-filename" class="filename">grails-app/conf/DataSource.groovy</p>
    <script>
        // todo: refactor to use data-attributes to define metadata for code
        $(function () {
            var selectorId = "#grails-ds";
            getSource("7992cea3891aaab896a2c3dbd693e865791dc60e", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2', 13);
            }, 13, 19)
        })
    </script>
    <pre><code id="grails-ds"></code></pre>
</section>
<section>
    <h3>Database - Play</h3>
    <ul>
        <li>EBean is the default persistence provider in Java projects</li>
        <li>Evolutions can be auto-applied</li>
        <li>Initial evolution sql is auto-created</li>
        <li>Subsequent changes must be versioned</li>
        <li>Auto-created schema file is database dependent</li>
        <li>Play 2 supports multiple datasources (Play 1 does not)</li>
    </ul>
    <br/><br/>

    <p id="playsql2-filename" class="filename">conf/evolutions/default/2.sql</p>
    <script>
        $(function() {
            var selectorId = "#playsql2";
            getSource("0492621e9816e6d3101f70cfddb38d00e651dad0", function (content, url) {
                $(selectorId).html(hljs.highlightAuto(content).value);
                linkToFile(selectorId, 'play2_java');
            })
        })
    </script>
    <pre><code id="playsql2"></code></pre>
</section>
<section>
    <h3>Database - Play</h3>

    <p>Using Heroku Postgres in production rocks!</p>
    <ul>
        <li>Postgres 9.1</li>
        <li>Dataclips</li>
        <li>Fork & Follow</li>
        <li>Multi-Ingres</li>
    </ul>
</section>

<section>
    <h3>URL Mapping - Grails</h3>

    <p id="grails-urls-filename" class="filename">grails-app/conf/UrlMappings.groovy</p>
    <script>
        $(function () {
            var selectorId = '#grails-urls';
            getSource("f276d476660440224fadb30cdbfe95ffd68fc086", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2');
            })
        })
    </script>
    <pre style="max-height: 500px;"><code id="grails-urls"></code></pre>
</section>
<section>
    <h3>URL Mapping - Play</h3>

    <p id="playconfroutes-filename" class="filename">conf/routes</p>
    <script>
        $(function() {
            var selectorId = '#playconfroutes';
            getSource("7b3a20560efa0678b215dd8780d166118181b2b5", function (content, url) {
                $(selectorId).html(hljs.highlightAuto(content).value);
                linkToFile(selectorId, 'play2_java', 6);
            }, 6)
        })
    </script>
    <pre style="max-height: 460px; height: 460px;"><code id="playconfroutes" style="width: 820px; font-size: 12px; line-height: 13px;"></code></pre>
</section>

<section>
    <h3>Models - Grails</h3>
    <ul>
        <li>All properties are persisted by default</li>
        <li>Constraints</li>
        <li>Mappings with hasMany and belongsTo</li>
        <li>Override methods for lifecycle events</li>
    </ul>
    <p id="grails-models-filename" class="filename">grails-app/domain/happytrails/Region.groovy</p>
    <script>
        $(function () {
            var selectorId = '#grails-models';
            getSource("7ddc8f7586ec556c78b5d5da80b5d9817f3ffd4e", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2');
            })
        })
    </script>
    <pre><code id="grails-models"></code></pre>
</section>
<section>
    <h3>Models - Play</h3>
    <ul>
        <li>EBean + JPA Annotations</li>
        <li>Declarative Validations (JSR 303)</li>
        <li>Query DSL</li>
        <li>Lazy Loading (except in Scala Templates)</li>
    </ul>
    <br/>
    <br/>

    <p id="playebean-filename" class="filename">app/models/Direction.java</p>
    <script>
        $(function() {
            var selectorId = '#playebean';
            getSource("2605e7194b8dcb3e86937d104f01189f66650c26", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'play2_java', 11);
            }, 11, 27)
        })
    </script>
    <pre><code id="playebean"></code></pre>
</section>
<section>
    <h3>Controllers - Grails</h3>

    <p id="grails-controller-filename" class="filename">grails-app/controllers/happytrails/HomeController.groovy</p>
    <script>
        $(function () {
            var selectorId = '#grails-controller';
            getSource("0217fb588ae56bfa1f1baa647b92502a0bac601d", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2');
            })
        })
    </script>
    <pre><code id="grails-controller"></code></pre>
</section>
<section>
    <h3>Controllers - Play</h3>

    <ul>
        <li>Stateless - Composable - Interceptable</li>
        <li>Clean connection between URLs and response code</li>
    </ul>
    <br/>
    <br/>

    <p id="playcontroller-filename" class="filename">app/controllers/RouteController.java</p>
    <script>
        $(function() {
            var selectorId = '#playcontroller';
            getSource("c17b49e3cc79505069114f854834daedb2d80032", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'play2_java', 11);
            }, 11, 36)
        })
    </script>
    <pre><code id="playcontroller" style="width: 820px; font-size: 12px; line-height: 13px;"></code></pre>
</section>

<section>
    <h3>Views - Grails</h3>
    <ul>
      <li>Groovy Server Pages, like JSPs</li>
      <li>GSP Tags</li>
      <li>Layouts and Templates</li>
      <li>Optimized Resources</li>
    </ul>
    <p id="grails-view-filename" class="filename">grails-app/views/region/show.gsp</p>
    <script>
        $(function () {
            var selectorId = '#grails-view';
            getSource("3097236d2514779b10a85ab5abfdb4f7079d832c", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2');
            })
        })
    </script>
    <pre><code id="grails-view"></code></pre>
</section>
<section>
    <h3>Views - Play</h3>

    <ul>
        <li>Scala Templates</li>
        <li>Composable</li>
        <li>Compiled</li>
    </ul>
    <br/>
    <br/>

    <p id="playview-filename" class="filename">app/views/region.scala.html</p>
    <script>
        $(function() {
            var selectorId = '#playview';
            getSource("514cdcfcb2bfd603f090de26aee617b3d315957b", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'play2_java');
            }, 1, 18)
        })
    </script>
    <pre><code id="playview"></code></pre>
</section>

<section>
    <h3>Validation - Grails</h3>
    <p id="grails-controller-validation-filename" class="filename">grails-app/controllers/happytrails/RouteController.groovy</p>
    <script>
          $(function() {
              var selectorId = '#grails-controller-validation';
              getSource("cb33a2dda2e723fa66f6bf2501cf512cac135587", function (content, url) {
                  $(selectorId).html(hljs.highlight("java", content).value);
                  linkToFile(selectorId, 'grails2', 22);
              }, 22, 31)
          })
      </script>
      <pre><code id="grails-controller-validation"></code></pre>

    <p id="grails-view-validation-filename" class="filename">grails-app/views/route/create.gsp</p>
    <script>
          $(function() {
              var selectorId = '#grails-view-validation';
              getSource("37c61e83552818b6dff7d92c74d04882e745c6ca", function (content, url) {
                  $(selectorId).html(hljs.highlight("java", content).value);
                  linkToFile(selectorId, 'grails2', 25);
              }, 25, 31)
          })
      </script>
      <pre><code id="grails-view-validation"></code></pre>
</section>
<section>
    <h3>Validation - Play</h3>

    <p id="playhaserrors-filename" class="filename">app/controllers/RouteController.java</p>
    <script>
        $(function() {
            var selectorId = '#playhaserrors';
            getSource("600b9cd3b927759207093233a376f235d305ddbf", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, 'play2_java', 24);
            }, 24, 28)
        })
    </script>
    <pre><code id="playhaserrors"></code></pre>

    <p id="playform-filename" class="filename">app/views/signupForm.scala.html</p>
    <script>
        $(function() {
            var selectorId = '#playform';
            getSource("22d0518aaa3aae6942ad9893b56f07b263e51caa", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, 'play2_java', 7);
            }, 7, 18)
        })
    </script>
    <pre><code id="playform"></code></pre>
</section>

<section>
    <h3>IDE Support - Grails</h3>

    <p><img src="assets/images/grails-intellij.png" width="80%"/></p>

    <p><em>IntelliJ Rocks!</em></p>
</section>
<section>
    <h3>IDE Support - Play</h3>

    <br/>
    <ul>
        <li>$ play idea</li>
        <li>$ play eclipsify<br/><br/></li>
        <li>Java!!!</li>
        <li>Debugging Support via Remote Debugger</li>
        <li>Limited Testing within IDE</li>
    </ul>
</section>

<section>
    <h3>Job - Grails</h3>

    <p id="grails-job-filename" class="filename">grails-app/jobs/happytrails/DailyRegionDigestEmailJob.groovy</p>
    <script>
        $(function () {
            var selectorId = '#grails-job';
            getSource("10ac49315d39b1c84506d660dc75524e691cf55e", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2');
            })
        })
    </script>
    <pre><code id="grails-job"></code></pre>
</section>
<section>
    <h3>Job - Play</h3>

    <br/>
    <ul>
        <li>Plain old `static void main`</li>
        <li>Independent of web app</li>
    </ul>
    <br/>
    <br/>

    <p id="playjob-filename" class="filename">app/jobs/DailyRegionDigestEmailJob.java</p>
    <script>
        $(function() {
            var selectorId = '#playjob';
            getSource("daf09a1d1dd3ca85fca2d6d9c3ff5e3951cc56dc", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'play2_java', 15);
            }, 15, 23)
        })
    </script>
    <pre><code id="playjob"></code></pre>
</section>

<section>
    <h3>Feed - Grails</h3>

    <ol>
      <li>grails install-plugin feeds</li>
      <li>Add feed() method to controller</li>
    </ol>

    <p id="grails-feed-filename" class="filename">grails-app/controllers/happytrails/RegionController.groovy</p>
    <script>
        $(function () {
            var selectorId = '#grails-feed';
            getSource("f5ac1ac2c7634e5686b3cb00792811b8f704b78a", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2', 99);
            }, 99, 117)
        })
    </script>
    <pre><code id="grails-feed"></code></pre>
</section>
<section>
    <h3>Feed - Play</h3>

    <br/>
    <ul>
        <li>No direct RSS/Atom support</li>
        <li>Dependency: "rome" % "rome" % "1.0"</li>
    </ul>
    <br/>
    <br/>

    <p id="playfeed-filename" class="filename">app/jobs/DailyRegionDigestEmailJob.java</p>
    <script>
        $(function() {
            var selectorId = '#playfeed';
            getSource("88bdca4db08657d104917c4343bb1deb8f2bf739", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'play2_java', 22);
            }, 22, 36)
        })
    </script>
    <pre><code id="playfeed"></code></pre>
</section>

<section>
    <h3>Email - Grails</h3>

    <p id="grails-email-filename" class="filename">grails-app/jobs/happytrails/DailyRegionDigestEmailJob.groovy</p>
    <script>
        $(function () {
            var selectorId = '#grails-email';
            getSource("10ac49315d39b1c84506d660dc75524e691cf55e", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2', 19);
            }, 19, 24)
        })
    </script>
    <pre><code id="grails-email"></code></pre>
    <p style="margin-top: 30px">
        <small style="line-height: 1.5">* powered by the <a href="http://grails.org/plugin/mail">mail plugin</a>
            (built-in)
        </small>
    </p>
</section>
<section>
    <h3>Email - Play</h3>

    <ul>
        <li>SendGrid Heroku Add-on</li>
        <li>Dependency:<br/>"com.typesafe" %% "play-plugins-mailer" % "2.0.2"</li>
    </ul>
    <br/>

    <p id="playemailsend-filename" class="filename">app/jobs/DailyRegionDigestEmailJob.java</p>
    <script>
        $(function () {
            var selectorId = '#playemailsend';
            getSource("daf09a1d1dd3ca85fca2d6d9c3ff5e3951cc56dc", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content.replace(/            /g, "")).value);
                linkToFile(selectorId, 'play2_java', 35);
            }, 35, 39)
        })
    </script>
    <pre><code id="playemailsend"></code></pre>

    <p id="playemailconfig-filename" class="filename">conf/prod.conf</p>
    <script>
        $(function () {
            var selectorId = '#playemailconfig';
            getSource("8dc070ef87d14717ba93a77155abae5c5f50daf7", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'play2_java', 9);
            }, 9, 13)
        })
    </script>
    <pre><code id="playemailconfig"></code></pre>
</section>

<section>
    <h3>Photo Upload - Grails</h3>
</section>
<section>
    <h3>Photo Upload - Play</h3>

    <ul>
        <li>Amazon S3 for Persistent File Storage</li>
    </ul>
    <br/>
    <br/>

    <p id="plays3photo-filename" class="filename">app/models/S3Photo.java</p>
    <script>
        $(function () {
            var selectorId = '#plays3photo';
            getSource("90cc9f870fdff7a012730c525430342590e76601", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content.replace(/        /g, "")).value);
                linkToFile(selectorId, 'play2_java', 57);
            }, 57, 65)
        })
    </script>
    <pre style="width: 900px;"><code id="plays3photo"></code></pre>

    <p id="playphotoupload-filename" class="filename">app/controllers/RegionController.java</p>
    <script>
        $(function () {
            var selectorId = '#playphotoupload';
            getSource("88bdca4db08657d104917c4343bb1deb8f2bf739", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content.replace(/        /g, "").replace(/\.asMultipart/g, "\n    .asMultipart")).value);
                linkToFile(selectorId, 'play2_java', 125);
            }, 125, 125)
        })
    </script>
    <pre style="width: 900px;"><code id="playphotoupload"></code></pre>
</section>

<section>
    <h3>Testing - Grails</h3>
    <ul>
      <li>Unit Tests with @TestFor and @Mock</li>
      <li>Test URL Mappings with UrlMappingsUnitTestMixin</li>
      <li>Integration Testing with GroovyTestCase</li>
      <li>Functional Testing with Geb</li>
    </ul>
    <p id="grails-tests-filename" class="filename">test/unit/happytrails/RouteTests.groovy</p>
    <script>
        $(function () {
            var selectorId = '#grails-tests';
            getSource("62215b1ccc17bbdc41ee1800a52d08e06d195584", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2');
            })
        })
    </script>
    <pre><code id="grails-tests"></code></pre>
    <p><small>* Grails plugins often aren't in test scope.</small></p>
</section>
<section>
    <h3>Testing - Play</h3>

    <ul>
        <li>Standard JUnit</li>
        <li>Unit Tests &amp; Functional Tests</li>
        <li>FakeApplication, FakeRequest, inMemoryDatabase</li>
        <li>Test: Controllers, Views, Routing, Real Server, Browser</li>
    </ul>
    <br/>
    <br/>

    <p id="playtest-filename" class="filename">test/ApplicationControllerTest.java</p>
    <script>
        $(function () {
            var selectorId = '#playtest';
            getSource("c119ae53d0085811ec367ef095676bfa86a2a11a", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, 'play2_java', 18);
            }, 18, 30)
        })
    </script>
    <pre style="width: 900px;"><code id="playtest"></code></pre>
</section>

<section>
    <h3>Demo Data - Grails</h3>

    <br/>

    <p id="grails-data-filename" class="filename">grails-app/conf/BootStrap.groovy</p>
    <script>
        $(function () {
            var selectorId = '#grails-data';
            getSource("89cb6acef9133f295a340fd15e031833e80ffa02", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2');
            })
        })
    </script>
    <pre><code id="grails-data"></code></pre>
</section>
<section>
    <h3>Demo Data - Play</h3>

    <br/>

    <p id="playdemodata-filename" class="filename">app/Global.java</p>
    <script>
        $(function () {
            var selectorId = '#playdemodata';
            getSource("b9c352fe070d084b1e52cd7c6f04bfcf99faa5e4", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, 'play2_java', 11);
            }, 11, 23)
        })
    </script>
    <pre><code id="playdemodata"></code></pre>
</section>

<section>
    <h3>Configuration - Grails</h3>

    <p id="grails-config-filename" class="filename">grails-app/conf/Config.groovy</p>
    <script>
        $(function () {
            var selectorId = '#grails-config';
            getSource("c0f703e135ea35bc68c3e0b42d5da91b4e110f4e", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2');
            })
        })
    </script>
    <pre><code id="grails-config"></code></pre>
</section>
<section>
    <h3>Configuration - Play</h3>

    <br/>
    <ul>
        <li>Based on the TypeSafe Config Library</li>
        <li>Override config with Java Properties:<br/>-Dfoo=bar</li>
        <li>Environment Variable substitution</li>
        <li>Run with different config files:<br/>-Dconfig.file=conf/prod.conf</li>
    </ul>

    <br/>
    <br/>

    <p id="playconfig-filename" class="filename">conf/prod.conf</p>
    <script>
        $(function () {
            var selectorId = '#playconfig';
            getSource("8dc070ef87d14717ba93a77155abae5c5f50daf7", function (content, url) {
                $(selectorId).html(hljs.highlightAuto(content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, 'play2_java', 1);
            }, 1, 7)
        })
    </script>
    <pre><code id="playconfig"></code></pre>
</section>

<section>
    <h3>Authentication - Grails</h3>

    <p style="padding: 20px 0">Spring Security UI Plugin, <q>I love you!</q></p>

    <p id="grails-security-filename" class="filename">grails-app/conf/Config.groovy</p>
    <script>
        $(function () {
            var selectorId = '#grails-security';
            getSource("c0f703e135ea35bc68c3e0b42d5da91b4e110f4e", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content).value);
                linkToFile(selectorId, 'grails2', 115);
            }, 115, 132)
        })
    </script>
    <pre><code id="grails-security"></code></pre>
</section>
<section>
    <h3>Authentication - Play</h3>

    <br/>
    <ul>
        <li>Uses cookies to remain stateless</li>
    </ul>
    <br/>
    <br/>

    <p id="playauthsecured-filename" class="filename">app/controllers/Secured.java</p>
    <script>
        $(function () {
            var selectorId = '#playauthsecured';
            getSource("442f0a61bff2b0f09a98ccd1e19418b0b9cf244b", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, 'play2_java', 9);
            }, 9, 15)
        })
    </script>
    <pre><code id="playauthsecured"></code></pre>
    <br/>

    <p id="playsecurity-filename" class="filename">app/controllers/RegionController.java</p>
    <script>
        $(function () {
            var selectorId = '#playsecurity';
            getSource("88bdca4db08657d104917c4343bb1deb8f2bf739", function (content, url) {
                $(selectorId).html(hljs.highlight("java", content.replace(/\n    /g, "\n").replace(/^    /g, "")).value);
                linkToFile(selectorId, 'play2_java', 105);
            }, 105, 108)
        })
    </script>
    <pre><code id="playsecurity"></code></pre>
</section>

</section>

<section>
  <section>
    <h2>Application Comparison</h2>
    <ul>
      <li><a href="#/8/1">YSlow</a></li>
      <li><a href="#/8/2">PageSpeed</a></li>
      <li><a href="#/8/3">Lines of Code</a></li>
      <li><a href="#/8/4">Load Testing</a></li>
    </ul>
  </section>
  <section>
    <h2>YSlow</h2>
    <div class="comparison">
      <img src="assets/images/yslow-bike.png" width="900"/>
      <img class="fragment" src="assets/images/yslow-hike.png" width="900"/>
    </div>
  </section>

  <section>
    <h2>PageSpeed</h2>
    <div class="comparison">
      <img src="assets/images/pagespeed-bike.png" width="900"/>
      <img class="fragment" src="assets/images/pagespeed-hike.png" width="900"/>
    </div>
  </section>

  <section>
    <h2>Lines of Code</h2>
    <div class="comparison">
      <img src="assets/images/cloc-grails.png" width="900"/>
      <img class="fragment" src="assets/images/cloc-play.png" width="900"/>
    </div>
  </section>

  <section>
    <h2>Load Testing with BrowserMob</h2>
    <img src="assets/images/neustar-dashboard.png" width="900"/>
  </section>

  <section>
    <h2>Load Testing - 1 Dyno</h2>

    <div style="width: 600px; margin: 0 auto">
      <div style="float: left">
        <img src="assets/images/bike-test-stats.png" height="254" width="258"/>

        <p>Bike (Grails)</p>
      </div>
      <div style="float: right">
        <img src="assets/images/hike-test-stats.png" height="255" width="260"/>

        <p>Hike (Play)</p>
      </div>
    </div>
  </section>

  <section>
    <h2>Load Testing - 1 Dyno</h2>

    <div class="comparison">
      <div>
        <img src="assets/images/bike-throughput.png" width="900"/>

      </div>
      <div class="fragment">
        <img src="assets/images/hike-throughput.png" width="900"/>

      </div>
    </div>
  </section>

  <section>
    <h2>Load Testing - 5 Dynos</h2>

    <div style="width: 600px; margin: 0 auto">
      <div style="float: left">
        <img src="assets/images/bike-test-stats-5dynos.png" height="250" width="245"/>

        <p>Bike (Grails)</p>
      </div>
      <div style="float: right">
        <img src="assets/images/hike-test-stats-5dynos.png" height="250" width="247"/>

        <p>Hike (Play)</p>
      </div>
    </div>
  </section>

  <section>
    <h2>Load Testing - 5 Dynos</h2>
    <div class="comparison">
      <div>
        <img src="assets/images/bike-throughput-5dynos.png" width="900"/>
      </div>
      <div class="fragment">
        <img src="assets/images/hike-throughput-5dynos.png" width="900"/>
      </div>
    </div>
  </section>

  <section style="text-align: center;">
    <h2>Load Testing - 5 Dynos</h2>
    <script>
        google.setOnLoadCallback(drawLoadChart);

        function drawLoadChart() {

           var data = google.visualization.arrayToDataTable([
                ['10000 Requests (100 Concurrent)', 'Grails', 'Play Framework'],
                ['Requests / Second', 198, 251]
            ]);

            var chart = new google.visualization.BarChart(document.getElementById('load_chart_div'));
            chart.draw(data, {width:900, height:500, hAxis: {viewWindow: {min:0}}});
        }
    </script>
    <div id="load_chart_div" style="width: 900px; height: 500px;"></div>
  </section>

  <section>
    <h2>Load Testing - 5 Dynos + 100 users</h2>
    <div class="comparison">
      <div>
        <img src="assets/images/bike-throughput-100users.png" width="900"/>
        <img src="assets/images/bike-stats-100users.png" style="position: absolute; top: 50px; right: 30px;"/>
      </div>
      <div class="fragment">
        <img src="assets/images/hike-throughput-100users.png" width="900"/>
        <img src="assets/images/hike-stats-100users.png" style="position: absolute; top: 50px; right: 30px;"/>
      </div>
    </div>
  </section>

</section>

<section>
    <section>
        <h2>Grails 2 vs. Play 2</h2>
        <ul>
            <li><a href="#/9/1">Jobs</a></li>
            <li><a href="#/9/2">LinkedIn Skills</a></li>
            <li><a href="#/9/3">Google Trends</a></li>
            <li><a href="#/9/4">Indeed</a></li>
            <li><a href="#/9/5">Mailing List Traffic</a></li>
            <li><a href="#/9/6">Books on Amazon</a></li>
            <li><a href="#/9/7">2012 Releases</a></li>
            <li><a href="#/9/8">Stack Overflow</a></li>
            <li><a href="#/9/9">Hacker News</a></li>
        </ul>
    </section>
    <section>
        <h2>Jobs</h2>
        <script>
            google.setOnLoadCallback(drawJobsChart);

            function drawJobsChart() {

                var data = google.visualization.arrayToDataTable([
                    ['Jobs', 'Grails', 'Play Framework', 'Spring MVC'],
                    ['Dice', 202, 5, 494],
                    ['Monster', 79, 4, 193],
                    ['Indeed', 1113, 31, 1844]
                ]);

                var chart = new google.visualization.BarChart(document.getElementById('jobs_chart_div'));
                chart.draw(data, {width:900, height:500});
            }
        </script>
        <div id="jobs_chart_div" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>LinkedIn Skills</h2>
        <script>
            google.setOnLoadCallback(drawLinkedinChart);

            function drawLinkedinChart() {

                var data = google.visualization.arrayToDataTable([
                    ['Skill', '# People'],
                    ['Grails', 3240],
                    ['Play Framework', 234],
                    ['Spring MVC', 2890]
                ]);

                var chart = new google.visualization.BarChart(document.getElementById('linkedin_chart_div'));
                chart.draw(data, {width:900, height:500});
            }
        </script>
        <div id="linkedin_chart_div" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>Google Trends</h2>
        <img src="assets/images/google-trends.png">
    </section>
    <section>
        <h2>Indeed Job Trends</h2>
        <p style="text-align: center">
          <img src="assets/images/indeed-absolute.png" width="779">
        </p>
    </section>
    <section>
        <h2>User Mailing List Traffic</h2>
        <script>
            google.setOnLoadCallback(drawMailingListChart);

            function drawMailingListChart() {
                new google.visualization.BarChart(document.getElementById('mailinglist_messages_chart_div')).draw(google.visualization.arrayToDataTable([
                    ['Messages', 'Grails', 'Play Framework'],
                    ['March', 1503, 3365],
                    ['April', 1377, 2884],
                    ['May', 1299, 2760]
                ]), {width:900, height:500}
                );
            }
        </script>
        <div id="mailinglist_messages_chart_div" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>Books on Amazon</h2>
        <script>
            google.setOnLoadCallback(drawBooksChart);

            function drawBooksChart() {
                new google.visualization.PieChart(document.getElementById('books_chart_div')).draw(google.visualization.arrayToDataTable([
                    ['Books', 'Amazon'],
                    ['Grails', 12],
                    ['Play Framework', 2]
                ]), {width:900, height:500, pieSliceText:'value'});
            }
        </script>
        <div id="books_chart_div" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>2012 Releases</h2>
        <script>
            google.setOnLoadCallback(drawReleasesChart);

            function drawReleasesChart() {
                new google.visualization.PieChart(document.getElementById('releases_chart_div')).draw(google.visualization.arrayToDataTable([
                    ['2012 Releases', '2012'],
                    ['Grails', 3],
                    ['Play Framework', 2]
                ]), {width:900, height:500, pieSliceText:'value'});
            }
        </script>
        <div id="releases_chart_div" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>StackOverflow Questions</h2>
        <script>
            google.setOnLoadCallback(drawStackOverflowChart);

            function drawStackOverflowChart() {
                new google.visualization.PieChart(document.getElementById('stackoverflow_chart_div')).draw(google.visualization.arrayToDataTable([
                    ['Tagged Questions', '#'],
                    ['grails', 7430],
                    ['playframework', 2467]
                ]), {width:900, height:500, pieSliceText:'value'});
            }
        </script>
        <div id="stackoverflow_chart_div" style="width: 900px; height: 500px;"></div>
    </section>
    <section>
        <h2>Hacker News</h2>
        <script>
            google.setOnLoadCallback(drawHackerNewsChart);

            function drawHackerNewsChart() {
                new google.visualization.PieChart(document.getElementById('hackernews_chart_div')).draw(google.visualization.arrayToDataTable([
                    ['Stories', '# Votes'],
                    ['Grails 2.0 released', 6],
                    ['Play Framework 2.0 Final released', 195]
                ]), {width:900, height:500, pieSliceText:'value'});
            }
        </script>
        <div id="hackernews_chart_div" style="width: 900px; height: 500px;"></div>
    </section>
</section>

<section>
  <section>
    <h2>Conclusions: Code</h2>
    <ul>
      <li>From a code perspective, very similar frameworks.</li>
      <li>Code authoring good in both, but lacking for Scala Templates.</li>
      <li>Grails Plugin Ecosystem is excellent.</li>
      <li>TDD-Style Development easy with both.</li>
      <li>Type-safety in Play 2 was really useful, especially routes.</li>
    </ul>
  </section>
  <section>
    <h2>Conclusions: Statistical Analysis</h2>
    <ul>
      <li>Grails has better support for FEO (YSlow, PageSpeed)</li>
      <li>Grails has less LOC! (6 lines less, but 40% more files)</li>
      <li>1 Dyno - Grails had 2x transactions!
        <ul><li>Grails experienced OOM about halfway through.</li></ul>
      </li>
      <li>Apache Benchmark with 10K requests:
        <ul>
          <li>Requests per second: {Play: 251, Grails: 198}</li>
        </ul>
      </li>
      <li>Load Test with 100 Real Users:
        <ul>
          <li>Grails: 10% more transactions, 0 errors</li>
        </ul>
      </li>
    </ul>
  </section>
  <section>
    <h2>Conclusions: Ecosystem Analysis</h2>
    <ul>
      <li>"Play" is difficult to search for.</li>
      <li>Grails is more mature.</li>
      <li>Play has momentum issues.</li>
      <li>LinkedIn: more people know Grails than Spring MVC.</li>
      <li>Play has 3x user mailing list traffic.</li>
      <li>We had similar experiences with documentation and questions.</li>
      <li>Outdated documentation is a problem for both.</li>
      <li>Play has <em>way</em> more hype!</li>
    </ul>
  </section>
</section>

<section>
  <h2>Questions?</h2>
  <ul>
      <li><a href="http://ubertracks.com">http://ubertracks.com</a></li>
      <li>Source:
        <ul>
          <li><a href="https://github.com/jamesward/happytrails">https://github.com/jamesward/happytrails</a></li>
          <li>Branches: grails2, play2_java</li>
          <li>Presentation*: master/preso</li>
        </ul>
      </li>
      <li>
        Contact Us:
        <ul>
          <li><a href="http://www.jamesward.com/">jamesward.com</a></li>
          <li><a href="http://www.raibledesigns.com/">raibledesigns.com</a></li>
        </ul>
      </li>
  </ul>

  <p style="margin-top: 10px; font-size: 18px">* Presentation created with <a href="http://lab.hakim.se/reveal-js">Reveal.js</a>,
    <a href="https://developers.google.com/chart/">Google Charts</a> and
    <a href="http://www.jamesward.com/2012/06/15/dynamically-rendering-github-files-in-web-pages">GitHub Files</a>.</p>
</section>
<section>
    <h1>Action!</h1>

    <p><em>Learn something new*!</em></p>

    <a href="http://www.mcginityphoto.com/Nature/Nature/4725995_szrsM">
      <img src="http://www.mcginityphoto.com/Nature/Nature/i-W4mgd99/2/M/DSC6057-M.jpg" width="600" height="399"/>
    </a>
    <p class="footnote">* Or prove that we're wrong...</p>
</section>
</div>

<!-- The navigational controls UI -->
<aside class="controls">
    <a class="left" href="#">&#x25C4;</a>
    <a class="right" href="#">&#x25BA;</a>
    <a class="up" href="#">&#x25B2;</a>
    <a class="down" href="#">&#x25BC;</a>
</aside>

<!-- Displays presentation progress, max value changes via JS to reflect # of slides -->
<div class="progress"><span></span></div>

</div>

<!-- Optional libraries for code syntax highlighting and classList support in IE9 -->
<script src="lib/highlight.pack.js"></script>
<script src="lib/classList.js"></script>
<script src="js/github-files.js"></script>
<script src="js/reveal.min.js"></script>

<script>
    // load the google charts library
    google.load('visualization', '1.0', {'packages':['corechart']});

    // Parse the query string into a key/value object
    var query = {};
    location.search.replace(/[A-Z0-9]+?=(\w*)/gi, function (a) {
        query[ a.split('=').shift() ] = a.split('=').pop();
    });

    // Fires each time a new slide is activated
    Reveal.addEventListener('slidechanged', function (event) {
        // event.indexh & event.indexv
    });

    Reveal.initialize({
        // Display controls in the bottom right corner
        controls:true,

        // Display a presentation progress bar
        progress:true,

        // If true; each slide will be pushed to the browser history
        history:true,

        // Loops the presentation, defaults to false
        loop:false,

        // Flags if mouse wheel navigation should be enabled
        mouseWheel:true,

        // Apply a 3D roll to links on hover
        rollingLinks:true,

        // UI style
        theme:query.theme || 'neon', // default/neon

        // Transition style
        transition:query.transition || 'default' // default/cube/page/concave/linear(2d)
    });

    //hljs.initHighlightingOnLoad();
</script>
</body>
</html>
